{% extends request.is_ajax|yesno:"base_ajax.html,base_search.html" %}
{%if not request.is_ajax%}
  {%block page_swap%}   
      <span>
        <a href="/" class="previous_page2">Back to my search results</a>
        <i class="fa fa-angle-right right"></i>
        {%if query%}
        <!-- {% for product in page.object_list%}
        <a href="" class="previous_page1">{{product.category}}</a>
        {% endfor %} -->
        
        <i class="fa fa-angle-right right"></i>
        <a href="" class="current_page">{{query}}</a>
        {%else%}
        <a href="" class="current_page">All Results</a>
        {%endif%}
      </span>
    {%endblock%} 

    <!-- Advance Search Form -->

    {%block search_results%}
        
        <div class="left_part">
          <div class="refine_results"><h4>Refine Your Results</h4></div>               
        <div id="cssmenu">
        
        <!-- Normal Search and Advance Form Start --> 
        <form id="form_search_filter" class="form_search_filter">
             <input id="search_form" type="hidden" name="{{form.q.html_name}}"  value="{{form.q.value|default:''}}"/>
             <input type="hidden" name="page"  value="{{page.number}}"/>             

             <ul class="main_list">             
                  <!--  All Categories & Sub-Categories to Display in Advance Search-->   
                      <li class="list_folder">All category 
                          <ul class="hide_list">
                           {% for categories in initial_load|get_categories %}
                              <li class="list_folder">
                              <a class="has_sub">
                              <span>{{categories}}<span class="product_quantity"></span>{{ categories.count }}</span>
                              </a>
                                  <ul class="hide_list">
                                  {% for subcategories in categories.id|get_subcategories %}
                                      <li class="list_folder">
                                       <a href="/search/?q=&subcategoryid={{subcategories.id}}" class="has_sub">{{subcategories}}
                               <span class="product_quantity">( {{subcategories.id|get_subcategoriesCount}} )
                                          </span>
                                         </a>
                                        </li>
                                  {% endfor %}       
                                  </ul>
                              </li>
                          {% endfor %}      
                          </ul>
                      </li>

                  <!--  All Brands Type to Display in Advance Search-->    
                      <li class="list_folder"> <b>Brands </b>
                          <ul class="hide_list">
                            <!-- Location Auto complete -->
                            <!-- <div class="location_holder">                  
                            <input type="text" class="location" style="size: 12" id="typeandbrandtxt" name= "typeandbrandtxt" value="{{form.name.value|default:''}}" placeholder="Type any brand"/>
                            <input type="hidden" class="location" style="size: 12" id="typeandbrand" name="{{form.name.html_name}}"value="{{form.name.value|default:''}}" placeholder="Type any brand"/>                  
                            </div> -->
                            <div id="listbrandtypes">
                               {% for brandsubcategory in request.GET.subcategoryid|get_brandforsubcategory %}  
                                 <li class="list_folder">
                                    <input type="checkbox" class="css-checkbox sme brandtype" id="{{brandsubcategory.id}}" name = "brandtype" value ="{{brandsubcategory.id}}"/>
                                    <label for="checkbox1" name="checkbox1_lbl" class="css-label sme depressed">
                                    {{brandsubcategory}}
                                    </label>  
                                 </li>
                               {% endfor %}      
                            <input type="hidden" id="brandtype" value="" />
                            </div>
                          </ul>
                      </li>
                      <!--  All PriceOptions to Display in Advance Search-->   
                      <li class="list_folder"><b>Price</b> 
                          <ul class="hide_list">                            
                               <li class="list_folder">
                               <input type="checkbox" class="css-checkbox sme pricerange" name="pricerange" value ="0.0#1000.0" />
                               <label for="checkbox1">Rs1000 & Below</label>  
                               </li>
                               <li class="list_folder">
                               <input type="checkbox" class="pricerange" name="pricerange" value ="1000.0#5000.0"/>
                                    <label for="checkbox1">Rs 1000 - Rs 5000</label>  
                               </li>
                               <li class="list_folder">
                               <input type="checkbox" class="pricerange" name="pricerange" value ="5000.0#15000.0"/>
                                    <label for="checkbox1">Rs 5000 - Rs 15000</label>  
                               </li>
                               <li class="list_folder">
                               <input type="checkbox" class="pricerange" name="pricerange" value ="15000.0#25000.0"/>
                                    <label for="checkbox1">Rs 15000 - Rs 25000</label>  
                               </li>
                               <li class="list_folder">
                               <input type="checkbox" class="pricerange" name="pricerange" value ="25000.0#50000.0"/>
                                    <label for="checkbox1">Rs 25000 - Rs 50000</label>  
                               </li>

                               <li class="list_folder">
                               <input type="checkbox" class="pricerange" name="pricerange" value ="50000.0#1000000.0"/>
                                    <label for="checkbox1">Rs 50000 & Above</label>  
                               </li>
                                                                  
                               <input type="hidden" id="price_start" value="" name="price_start"/>
                               <input type="hidden" id="price_end" value="" name="price_end"/>                          
                          </ul>
                      </li>
            </ul>
           </form> 
           </div>
        </div> <!-- left_part -->
    {%endblock%}      
{%endif%}

{%block search_results1%}
<div class="fl filter_result_wrapper" id="search_result" style="position:relative;">            
      <div class="right_part">
        {% if page and page.object_list %}
        <div class="top_part">
          <!-- <p>{{ page.number }} - {{page.paginator.num_pages}} of {{ page.object_list.count }} Results</p> -->
          <p>{{ page.number }} of {{page.paginator.num_pages}} Results</p>
          <div class="founded_no">
          </div>

          <div class="sort_part">
              <span>Sort by</span>
              <div class="custom_select sorting_custom_select">
                          <div class="select">
                            <p id="custom_select_value_act">Popularity</p>
                            <i class="fa fa-caret-down new_icon"></i>
                          </div> <!-- select -->
                          <select class="custom_select_value_act option_color" name="sortdata">
                          <option value="createddate">createddate</option>
                          <option value="modifieddate">modifieddate</option>
                          <option value="pricelow">pricelow</option>
                          <option value="pricehigh">pricehigh</option>
                          </select>
              </div><!-- custom_select -->
              
          </div> <!-- sort_part -->
        </div> <!-- top_part -->
        <div class="">
          <ul class="product1">
            {% for product in page.object_list %}
                {% if product.object %}
               
                
            <li class="product_list1">
              <div class="product_images1 bg-img">
                    {% if product.object.photos = '' %}
                    <a href="{% url product_detail product.object.id %}"></a>
                    {% else %}
                    <a href="{% url product_detail product.object.id %}"><img src="{{ STATIC_ROOT }}/{{ product.object.photos|get_photos }}"></a>
                    {% endif %}
                    <div class="count_holder1">
                        <span>{{product.object.imagecount}}</span>
                        <i class="fa fa-camera"></i>
                    </div>
                    </a>
              </div>
              <div class="details">
                  <div class="product_name1">
                      <a href="{% url product_detail product.object.id %}" class="spans"> {{product.object.title}}</a>
                      
                      <span class="product_description1">{{product.object.description}}</span>
                      <!-- <span class="additional_description">{{product.object.description}}</span> -->
                      
                      <span class="model_year1"> used | in Anna nagar | By dealer</span>
                      <span class="year">{{product.object.created_date}}</span>
                  </div>
                  <div class="additional_details">
                    <h3>{{product.object.price}}</h3>
                    <div class="number_verify_control">
                      <span class="number_verify1">Number verified<i class="fa fa-check-circle checkcircle">
                      </i></span>
                    </div>
                    <a href="" class="btn btn-default contact_button contact-button"> contact</a>
                  </div>
              </div>
            </li>
            {%endif%}
            {% endfor %}
          </ul>
        </div>
        <div class="bottom_part">
           <p>{{ page.number }} of {{page.paginator.num_pages}} Results</p>
          <div class="pagination" id="pagination_filter">
            <ul class="pagination">
            
              <li>
              {% if page.has_previous %} 
              <a data-ajaxlink="true" data-ajaxpage="{{ page.previous_page_number }}" href="?q={{request.REQUEST.q}}&page={{ page.previous_page_number }}">
              <i class="fa  fa-angle-double-left"></i></a> 
              {% endif %}
              </li>
              {% for p in page.paginator.page_range %}
              {% if p|add:5 >= page.number and p|add:-5 <= page.number %}
              <li {% if p == page.number %} class="active"{% endif %}>
              <a data-ajaxlink="true" data-ajaxpage="{{ p }}" href="?q={{request.REQUEST.q}}&page={{ p }}">
              {{ p }}
              </a>
              </li> 
              {% endif %}
              {% endfor %}
              
              <li>
              {% if page.has_next %} 
              <a data-ajaxlink="true" data-ajaxpage="{{ page.next_page_number }}" href="?q={{request.REQUEST.q}}&page={{ page.next_page_number }}">
              <i class="fa  fa-angle-double-right"></i>
              </a> 
              {% endif %}
              </li> 
            
            </ul>
          </div>
        </div> <!-- bottom_part -->
        {%endif%}
      </div> <!-- right_part -->
{%if not request.is_ajax%}
</div><!--filter_result_wrapper-->
<div class="clear_both"> </div> 
{%endif%}
{%endblock%}

    